{"ast":null,"code":"import _objectSpread from\"D:/Jahana 2021/Projects/NoteApp/noteappbackend/my_notes/noteappfrontend/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import _regeneratorRuntime from\"D:/Jahana 2021/Projects/NoteApp/noteappbackend/my_notes/noteappfrontend/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"D:/Jahana 2021/Projects/NoteApp/noteappbackend/my_notes/noteappfrontend/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"D:/Jahana 2021/Projects/NoteApp/noteappbackend/my_notes/noteappfrontend/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useState,useEffect}from\"react\";import{useParams,useNavigate,Navigate}from\"react-router-dom\";import{ReactComponent as ArrowLeft}from\"../assets/image/chevron-left.svg\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var NotePages=function NotePages(){var navigate=useNavigate();var _useParams=useParams(),id=_useParams.id;var _useState=useState({}),_useState2=_slicedToArray(_useState,2),note=_useState2[0],setNote=_useState2[1];useEffect(function(){getNote();},[id]);var getNote=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(){var result,data;return _regeneratorRuntime().wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:if(!(id==='new')){_context.next=2;break;}return _context.abrupt(\"return\");case 2:_context.next=4;return fetch(\"/api/notes/\".concat(id));case 4:result=_context.sent;_context.next=7;return result.json();case 7:data=_context.sent;setNote(data);case 9:case\"end\":return _context.stop();}}},_callee);}));return function getNote(){return _ref.apply(this,arguments);};}();var updateNote=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee2(){return _regeneratorRuntime().wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:fetch(\"/api/notes/\".concat(id),{method:'PUT',headers:{'Content-Type':'application/json'},body:JSON.stringify(note)});case 1:case\"end\":return _context2.stop();}}},_callee2);}));return function updateNote(){return _ref2.apply(this,arguments);};}();var createNote=/*#__PURE__*/function(){var _ref3=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee3(){return _regeneratorRuntime().wrap(function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:fetch(\"/api/notes/\",{method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify(note)});case 1:case\"end\":return _context3.stop();}}},_callee3);}));return function createNote(){return _ref3.apply(this,arguments);};}();var deleteNote=/*#__PURE__*/function(){var _ref4=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee4(){return _regeneratorRuntime().wrap(function _callee4$(_context4){while(1){switch(_context4.prev=_context4.next){case 0:fetch(\"/api/notes/\".concat(id),{method:'DELETE',headers:{'Content-Type':'application/json'}});navigate(\"/\");case 2:case\"end\":return _context4.stop();}}},_callee4);}));return function deleteNote(){return _ref4.apply(this,arguments);};}();var handleSubmit=function handleSubmit(){if(id!==\"new\"&&!note.body){deleteNote();}else if(id!==\"new\"){updateNote();}else if(id==\"new\"&&note!==null){createNote();}navigate(\"/\");};return/*#__PURE__*/_jsxs(\"div\",{className:\"note\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"note-header\",children:[/*#__PURE__*/_jsx(\"h3\",{children:/*#__PURE__*/_jsx(ArrowLeft,{onClick:handleSubmit})}),id!=='new'?/*#__PURE__*/_jsx(\"button\",{onClick:deleteNote,children:\"Delete\"}):/*#__PURE__*/_jsx(\"button\",{onClick:handleSubmit,children:\"Done\"})]}),/*#__PURE__*/_jsx(\"textarea\",{onInput:function onInput(e){setNote(_objectSpread(_objectSpread({},note),{},{'body':e.target.value}));},defaultValue:note===null||note===void 0?void 0:note.body})]});};export default NotePages;","map":{"version":3,"names":["React","useState","useEffect","useParams","useNavigate","Navigate","ReactComponent","ArrowLeft","NotePages","navigate","id","note","setNote","getNote","fetch","result","json","data","updateNote","method","headers","body","JSON","stringify","createNote","deleteNote","handleSubmit","e","target","value"],"sources":["D:/Jahana 2021/Projects/NoteApp/noteappbackend/my_notes/noteappfrontend/src/pages/NotePages.jsx"],"sourcesContent":["import React, { useState, useEffect } from \"react\";\r\nimport { useParams, useNavigate, Navigate } from \"react-router-dom\";\r\nimport {ReactComponent as ArrowLeft} from \"../assets/image/chevron-left.svg\"\r\n\r\nconst NotePages = () => {  \r\n\r\n  const navigate=useNavigate()\r\n  const { id } = useParams();\r\n  const [note, setNote] = useState({});\r\n\r\n  useEffect(() => {\r\n    getNote();\r\n  }, [id]);\r\n\r\n  const getNote = async () => {\r\n    if(id==='new') return\r\n    let result = await fetch(`/api/notes/${id}`);\r\n    let data = await result.json();\r\n    setNote(data);\r\n  };\r\n\r\n  let updateNote=async()=>{\r\n    fetch(`/api/notes/${id}`,{\r\n        method:'PUT',\r\n        headers: {\r\n            'Content-Type':'application/json'\r\n        },\r\n        body: JSON.stringify(note)\r\n\r\n    })\r\n  }\r\n\r\n\r\n  let createNote=async()=>{\r\n    fetch(`/api/notes/`,{\r\n        method:'POST',\r\n        headers: {\r\n            'Content-Type':'application/json'\r\n        },\r\n        body: JSON.stringify(note)\r\n\r\n    })\r\n  }\r\n\r\n\r\n  let deleteNote=async()=>{\r\n    fetch(`/api/notes/${id}`,{\r\n        method:'DELETE',\r\n        headers: {\r\n            'Content-Type':'application/json'\r\n        }\r\n    })\r\n    navigate(\"/\")\r\n  }\r\n\r\n\r\n\r\n  const handleSubmit=()=>{\r\n    if(id!==\"new\" && !note.body){\r\n        deleteNote()\r\n    }\r\n\r\n    else if(id!==\"new\"){\r\n    updateNote()}\r\n\r\n    else if(id==\"new\" && note!==null){\r\n      createNote()\r\n    }\r\n    navigate(\"/\")\r\n  }\r\n\r\n  \r\n  return (\r\n    <div className=\"note\">\r\n        <div className=\"note-header\">\r\n           <h3><ArrowLeft onClick={handleSubmit}/></h3>\r\n           {id!=='new'?( <button onClick={deleteNote}>Delete</button>):(<button onClick={handleSubmit}>Done</button>)}\r\n          \r\n        </div>\r\n      <textarea onInput={e=>{setNote({...note,'body':e.target.value})}} defaultValue={note?.body}></textarea>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default NotePages;\r\n"],"mappings":"moBAAA,MAAOA,MAAP,EAAgBC,QAAhB,CAA0BC,SAA1B,KAA2C,OAA3C,CACA,OAASC,SAAT,CAAoBC,WAApB,CAAiCC,QAAjC,KAAiD,kBAAjD,CACA,OAAQC,cAAc,GAAIC,UAA1B,KAA0C,kCAA1C,C,wFAEA,GAAMC,UAAS,CAAG,QAAZA,UAAY,EAAM,CAEtB,GAAMC,SAAQ,CAACL,WAAW,EAA1B,CACA,eAAeD,SAAS,EAAxB,CAAQO,EAAR,YAAQA,EAAR,CACA,cAAwBT,QAAQ,CAAC,EAAD,CAAhC,wCAAOU,IAAP,eAAaC,OAAb,eAEAV,SAAS,CAAC,UAAM,CACdW,OAAO,GACR,CAFQ,CAEN,CAACH,EAAD,CAFM,CAAT,CAIA,GAAMG,QAAO,4FAAG,0JACXH,EAAE,GAAG,KADM,wFAEKI,MAAK,sBAAeJ,EAAf,EAFV,QAEVK,MAFU,qCAGGA,OAAM,CAACC,IAAP,EAHH,QAGVC,IAHU,eAIdL,OAAO,CAACK,IAAD,CAAP,CAJc,sDAAH,kBAAPJ,QAAO,0CAAb,CAOA,GAAIK,WAAU,6FAAC,0IACbJ,KAAK,sBAAeJ,EAAf,EAAoB,CACrBS,MAAM,CAAC,KADc,CAErBC,OAAO,CAAE,CACL,eAAe,kBADV,CAFY,CAKrBC,IAAI,CAAEC,IAAI,CAACC,SAAL,CAAeZ,IAAf,CALe,CAApB,CAAL,CADa,wDAAD,kBAAVO,WAAU,2CAAd,CAYA,GAAIM,WAAU,6FAAC,0IACbV,KAAK,eAAe,CAChBK,MAAM,CAAC,MADS,CAEhBC,OAAO,CAAE,CACL,eAAe,kBADV,CAFO,CAKhBC,IAAI,CAAEC,IAAI,CAACC,SAAL,CAAeZ,IAAf,CALU,CAAf,CAAL,CADa,wDAAD,kBAAVa,WAAU,2CAAd,CAYA,GAAIC,WAAU,6FAAC,0IACbX,KAAK,sBAAeJ,EAAf,EAAoB,CACrBS,MAAM,CAAC,QADc,CAErBC,OAAO,CAAE,CACL,eAAe,kBADV,CAFY,CAApB,CAAL,CAMAX,QAAQ,CAAC,GAAD,CAAR,CAPa,wDAAD,kBAAVgB,WAAU,2CAAd,CAYA,GAAMC,aAAY,CAAC,QAAbA,aAAa,EAAI,CACrB,GAAGhB,EAAE,GAAG,KAAL,EAAc,CAACC,IAAI,CAACU,IAAvB,CAA4B,CACxBI,UAAU,GACb,CAFD,IAIK,IAAGf,EAAE,GAAG,KAAR,CAAc,CACnBQ,UAAU,GAAG,CADR,IAGA,IAAGR,EAAE,EAAE,KAAJ,EAAaC,IAAI,GAAG,IAAvB,CAA4B,CAC/Ba,UAAU,GACX,CACDf,QAAQ,CAAC,GAAD,CAAR,CACD,CAZD,CAeA,mBACE,aAAK,SAAS,CAAC,MAAf,wBACI,aAAK,SAAS,CAAC,aAAf,wBACG,iCAAI,KAAC,SAAD,EAAW,OAAO,CAAEiB,YAApB,EAAJ,EADH,CAEIhB,EAAE,GAAG,KAAL,cAAa,eAAQ,OAAO,CAAEe,UAAjB,oBAAb,cAA4D,eAAQ,OAAO,CAAEC,YAAjB,kBAFhE,GADJ,cAME,iBAAU,OAAO,CAAE,iBAAAC,CAAC,CAAE,CAACf,OAAO,gCAAKD,IAAL,MAAU,OAAOgB,CAAC,CAACC,MAAF,CAASC,KAA1B,GAAP,CAAyC,CAAhE,CAAkE,YAAY,CAAElB,IAAF,SAAEA,IAAF,iBAAEA,IAAI,CAAEU,IAAtF,EANF,GADF,CAUD,CA9ED,CAgFA,cAAeb,UAAf"},"metadata":{},"sourceType":"module"}